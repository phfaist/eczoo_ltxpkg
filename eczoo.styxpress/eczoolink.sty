\ProvidesPackage{eczoolink}
%
\newdimen\eczooIconRawWidth
\eczooIconRawWidth=15.4bp\relax
\newdimen\eczooIconRawHeight
\eczooIconRawHeight=15.4bp\relax
% \newdimen\eczooIconRawMargin
% \eczooIconRawMargin=0.6bp\relax
%
\def\@EczooIconSetDefaults{%
  \def\eczooIconScale{1.3}%
  \def\eczooIconBaseHeight{\protect\fontcharht\protect\font`X}%
  \def\eczooIconTrimMargins{%
    % \the\dimexpr\eczooIconScale\eczooIconRawMargin\relax\space
    % \the\dimexpr\eczooIconScale\eczooIconRawMargin\relax\space
    % \the\dimexpr\eczooIconScale\eczooIconRawMargin\relax\space
    % \the\dimexpr\eczooIconScale\eczooIconRawMargin\relax
    1bp 1bp 1bp 1bp
  }%
}
% 
\def\eczoo@IconSetGraphicsOptions{%
  \begingroup
    \let\protect\noexpand
    \xdef\eczoo@GraphicsOptions{%
      trim=\eczooIconTrimMargins,%
      clip=false,%
      height=\eczooIconScale\eczooIconBaseHeight
    }%
  \endgroup
}
%
\def\EczooIconSetBaseHeight#1{%
  \def\eczooIconBaseHeight{#1}%
  \eczoo@IconSetGraphicsOptions
}
\def\EczooIconSetDefaults{%
  \@EczooIconSetDefaults
  \eczoo@IconSetGraphicsOptions
}
\def\EczooIconSetScale#1{%
  \def\eczooIconScale{#1}%
  \eczoo@IconSetGraphicsOptions
}
\EczooIconSetDefaults
%
\def\eczooUseIcon{%
  \expandafter\eczooIcon\expandafter[\eczoo@GraphicsOptions]}
%
\newcommand\eczooFormatLinkText[1]{%
  \if\relax\detokenize{#1}\relax\else #1~\fi
  \eczooLinkIcon
}
\def\eczooLinkIcon{\eczooUseIcon}
%\def\EczooNoIconInLink{\let\eczooLinkIcon\relax}

\newcommand\eczoo[2][]{%
  \if\relax\detokenize{#2}\relax
    \href{https://errorcorrectionzoo.org/}{\eczooFormatLinkText{#1}}%
  \else
    \href{https://errorcorrectionzoo.org/c/#2}{\eczooFormatLinkText{#1}}%
  \fi
}

\newcommand\eczoohrefFormatLinkText[1]{%
  \if\relax\detokenize{#1}\relax\eczooTheEcZooText\else #1\fi
}
\def\eczooTheEcZooText{The Error Correction Zoo}

\newcommand\eczoohref[2][]{%
  \if\relax\detokenize{#2}\relax
    \href{https://errorcorrectionzoo.org/}{\eczoohrefFormatLinkText{#1}}%
  \else
    \href{https://errorcorrectionzoo.org/c/#2}{\eczoohrefFormatLinkText{#1}}%
  \fi
}
